---
title: Advanced Agent Configuration
navTitle: Advanced Configuration
---

# Configuration Options

{% hint style="warning" %}
This documentation covers the configuration options of the **legacy** agent.
Only use it in case you still run the legacy Agent.

Otherwise, please refer to [this section](install-and-configure/install-outpost-agent/advanced-configuration) instead for configuration options of the Agent.
{% endhint %}

| agent.sh Argument | Environment Variable                                  | Description                                                                                                                                                                                                                                                                                                                                                            |
| ----------------- | ----------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| -a                | `STEADYBIT_AGENT_KEY`                                 | <p>The API key the agent uses<br><strong>Example:</strong> <code>foobar</code></p>                                                                                                                                                                                                                                                                                     |
| -h                |                                                       | Override the hostname for the docker container to use. Useful on docker for mac                                                                                                                                                                                                                                                                                        |
| -e                | `STEADYBIT_AGENT_REGISTER_URL`                        | <p>The baseUrl where the agent registers.<br><strong>Default:</strong> <code>https://platform.steadybit.com</code></p>                                                                                                                                                                                                                                                 |
| -i                | `STEADYBIT_AGENT_DOCKER_IMAGE`                        | <p>The Agent Docker image to use.<br><strong>Default:</strong> <code>steadybit/agent:latest</code></p>                                                                                                                                                                                                                                                                 |
| -r                | `STEADYBIT_DOCKER_REGISTRY`                           | The Agent Docker registry to use.                                                                                                                                                                                                                                                                                                                                      |
| -u                | `STEADYBIT_DOCKER_REGISTRY_USER`                      | <p>User for authenticating against the Docker Registry.<br><strong>Default:</strong> <code>\_</code></p>                                                                                                                                                                                                                                                               |
| -p                | `STEADYBIT_DOCKER_REGISTRY_PASSWORD`                  | <p>Password for authenticating against the Docker Registry.<br><strong>Default:</strong> STEADYBIT_AGENT_KEY</p>                                                                                                                                                                                                                                                       |
| -l                | `STEADYBIT_LOG_LEVEL`                                 | <p>Sets the loglevel for the com.steadybit logger<br><strong>Default:</strong> <code>INFO</code></p>                                                                                                                                                                                                                                                                   |
|                   | `LOG_LEVEL`                                           | <p>Sets the loglevel for the root logger<br><strong>Default:</strong> <code>INFO</code></p>                                                                                                                                                                                                                                                                            |
|                   | `STEADYBIT_LOG_FORMAT`                                | <p>Sets the log format for the console logger (<code>json</code> or <code>text</code>)<br><strong>Default:</strong> <code>text</code></p>                                                                                                                                                                                                                              |
|                   | `STEADYBIT_AGENT_REGISTER_TIMEOUT`                    | <p>Timeout for the registration request.<br><strong>Default:</strong> <code>5s</code></p>                                                                                                                                                                                                                                                                              |
|                   | `STEADYBIT_AGENT_REGISTER_INTERVAL`                   | <p>The interval how often the agent registers at the platform.<br><strong>Default:</strong> <code>5s</code></p>                                                                                                                                                                                                                                                        |
|                   | `STEADYBIT_AGENT_EXPERIMENT_TIMEOUT`                  | <p>Timeout for the request to connect to an experiment.<br><strong>Default:</strong> <code>5s</code></p>                                                                                                                                                                                                                                                               |
|                   | `STEADYBIT_AGENT_EXPERIMENT_KEEP_ALIVE_INTERVAL`      | <p>Interval how often a keep alive is sent during an experiment.<br><strong>Default:</strong> <code>2s</code></p>                                                                                                                                                                                                                                                      |
|                   | `STEADYBIT_AGENT_EXPERIMENT_KEEP_ALIVE_TIMEOUT`       | <p>Timeout for a keep alive during an experiment<br><strong>Default:</strong> <code>10s</code></p>                                                                                                                                                                                                                                                                     |
|                   | `STEADYBIT_AGENT_WEBSOCKET_PING_INTERVAL`             | <p>Interval in seconds of the heartbeat for the websocket connection <br><strong>Default</strong>: <code>4s</code></p>                                                                                                                                                                                                                                                 |
|                   | `STEADYBIT_AGENT_DISCOVERY_INTERVAL`                  | <p>The interval of often the agent runs the discovery.<br><strong>Default:</strong> <code>30s</code></p>                                                                                                                                                                                                                                                               |
|                   | `STEADYBIT_AGENT_ATTRIBUTE_FILTER_SKIP_DEFAULTS`      | <p>Should the default excludes be ignored? (Default excludes: <code>label.io.kubernetes.</code><strong>,<code>label.annotation.io.kubernetes.</code></strong>,<code>k8s.pod.label.controller-revision-hash</code>,<code>k8s.pod.label.pod-template-generation</code>,<code>k8s.pod.label.pod-template-hash</code>)<br><strong>Default:</strong> <code>false</code></p> |
|                   | `STEADYBIT_AGENT_ATTRIBUTE_FILTER_EXCLUDES`           | Attribute-Keys which should not be sent to the platform.                                                                                                                                                                                                                                                                                                               |
|                   | `STEADYBIT_AGENT_ATTRIBUTE_FILTER_INCLUDES`           | Attribute-Keys which should be sent to the platform, even if they are excluded by STEADYBIT_AGENT_ATTRIBUTE_FILTER_EXCLUDES or the default excludes.                                                                                                                                                                                                                   |
|                   | `STEADYBIT_DOCKER_SOCKET`                             | <p>Docker Socket to connect to.<br><strong>Default:</strong> <code>/var/run/docker.sock</code></p>                                                                                                                                                                                                                                                                     |
|                   | `STEADYBIT_DISCOVERY_ENV_LIST`                        | <p>List of environment variables to inlude in the discovery<br><strong>Example:</strong> <code>STEADYBIT_DISCOVERY_ENV_LIST=STAGE,REGION</code></p>                                                                                                                                                                                                                    |
|                   | `STEADYBIT_LABEL_*`                                   | <p>All env vars with this prefix will be added as label<br><strong>Example:</strong> <code>STEADYBIT_LABEL_STAGE=test</code></p>                                                                                                                                                                                                                                       |
|                   | `STEADYBIT_AGENT_AWS_EC2_METADATA_URL`                | <p>AWS EC2 Metadata URL<br><strong>Default:</strong> <code>http://169.254.169.254/latest/</code></p>                                                                                                                                                                                                                                                                   |
|                   | `STEADYBIT_HTTP_ENDPOINT_PORT`                        | <p>HTTP endpoint port for the health check url<br><strong>Default:</strong> <code>42999</code></p>                                                                                                                                                                                                                                                                     |
|                   | `STEADYBIT_AGENT_ACTIONS_ENABLED`                     | <p>Should this agent be eligible for executing actions?<br><strong>Default:</strong> <code>true</code></p>                                                                                                                                                                                                                                                             |
|                   | `STEADYBIT_AGENT_PROXY_HOST`                          | <p>Hostname of a proxy to access steadybit platform<br></p>                                                                                                                                                                                                                                                                                                            |
|                   | `STEADYBIT_AGENT_PROXY_PORT`                          | <p>Port of a proxy to access steadybit platform<br></p>                                                                                                                                                                                                                                                                                                                |
|                   | `STEADYBIT_AGENT_PROXY_PROTOCOL`                      | <p>Protocol of a proxy to access steadybit platform<br><strong>Default:</strong> <code>http</code></p>                                                                                                                                                                                                                                                                 |
|                   | `STEADYBIT_AGENT_PROXY_USER`                          | <p>Username of a proxy to access steadybit platform<br></p>                                                                                                                                                                                                                                                                                                            |
|                   | `STEADYBIT_AGENT_PROXY_PASSWORD`                      | <p>Password of a proxy to access steadybit platform<br></p>                                                                                                                                                                                                                                                                                                            |
|                   | `STEADYBIT_AGENT_MODE`                                | <p>Currently there are 2 modes: <code>default</code> and <code>aws</code>. More details for the <code>aws</code> mode can be found <a href="../../content/install-configure/30-install-agents/40-aws-cloud.md">here</a><br><strong>Default:</strong> <code>default</code></p>                                                                                          |
|                   | `STEADYBIT_AGENT_AWS_ASSUME_ROLE_LIST`                | <p>The AWS agent has an option to assume into a list of given Role-ARNs. More detail <a href="../../content/install-configure/30-install-agents/40-aws-cloud.md">here</a><br><strong>Default:</strong> empty, means that the agent does not assume into roles and just uses its own credentials.</p>                                                                   |
|                   | `STEADYBIT_AGENT_IDENTIFIER`                          | <p>The identifier which will be used to register the agent at the platform<br><strong>Default:</strong> The agent will use the hostname as identifier</p>                                                                                                                                                                                                              |
|                   | `STEADYBIT_AGENT_DISCOVERIES_DISABLED`                | <p>Option to disable single discoveries<br><strong>Default:</strong> empty</p>                                                                                                                                                                                                                                                                                         |
|                   | `STEADYBIT_AGENT_AUTH_PROVIDER`                       | <p>The auth mechanism to use - <code>OAUTH2</code> or <code>AGENT-KEY</code></p><p><strong>Default:</strong> <code>AGENT-KEY</code></p>                                                                                                                                                                                                                                |
|                   | `STEADYBIT_AGENT_AUTH_OAUTH2_CLIENT_ID`               | The public identifier of your OAuth 2.0 Client                                                                                                                                                                                                                                                                                                                         |
|                   | `STEADYBIT_AGENT_AUTH_OAUTH2_CLIENT_SECRET`           | The client secret                                                                                                                                                                                                                                                                                                                                                      |
|                   | `STEADYBIT_AGENT_AUTH_OAUTH2_ISSUER_URI`              | The issuer uri of the identity provider                                                                                                                                                                                                                                                                                                                                |
|                   | `STEADYBIT_AGENT_AUTH_OAUTH2_TOKEN_URI`               | The token uri of the identity provider to directly specify the URL to retrieve the access tokens from                                                                                                                                                                                                                                                                  |
|                   | `STEADYBIT_AGENT_AUTH_OAUTH2_AUDIENCE`                | Optional - Some provider needs the audience parameter to authenticate the client.                                                                                                                                                                                                                                                                                      |
|                   | `STEADYBIT_AGENT_AUTH_OAUTH2_AUTHORIZATION_GRAN_TYPE` | <p>The grant type to use either <code>client_credentials</code> or <code>password</code>.<br><strong>Default:</strong> <code>client_credentials</code></p>                                                                                                                                                                                                             |
|                   | `STEADYBIT_AGENT_AUTH_OAUTH_USERNAME`                 | The username to use for the username flow                                                                                                                                                                                                                                                                                                                              |
|                   | `STEADYBIT_AGENT_AUTH_OAUTH_PASSWORD`                 | The username to use when using the password flow                                                                                                                                                                                                                                                                                                                       |
|                   | `STEADYBIT_AGENT_AUTH_OAUTH_CLIENT_CERT_CHAIN_FILE`   | Optional - the x.509 client certificate to use for mutual TLS with the identity provider.                                                                                                                                                                                                                                                                              |
|                   | `STEADYBIT_AGENT_AUTH_OAUTH_CLIENT_CERT_KEY_FILE`     | Optional - the PKCS#8 encoded private key to use for mutual TLS with the identity provider                                                                                                                                                                                                                                                                             |
|                   | `STEADYBIT_AGENT_AUTH_OAUTH_CLIENT_CERT_PASSWORD`     | Optional - Password for the the PKCS#8 encoded private key to use for mutual TLS with the identity provider                                                                                                                                                                                                                                                            |
